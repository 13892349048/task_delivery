# ä»»åŠ¡åˆ†é…ç®¡ç†ç³»ç»Ÿ (Task Assignment Management System)

åŸºäº Go + Asynq + Redis çš„ä¼ä¸šçº§ä»»åŠ¡åˆ†é…ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ™ºèƒ½åˆ†é…ã€è´Ÿè½½å‡è¡¡ã€å®¡æ‰¹æµç¨‹å’Œå®æ—¶ç›‘æ§ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- **æ™ºèƒ½ä»»åŠ¡åˆ†é…**: æ”¯æŒè½®è¯¢ã€è´Ÿè½½å‡è¡¡ã€æŠ€èƒ½åŒ¹é…ã€ä¼˜å…ˆçº§åŒ¹é…ç­‰å¤šç§åˆ†é…ç®—æ³•
- **å®Œæ•´å®¡æ‰¹æµç¨‹**: ä»»åŠ¡åˆ›å»ºå®¡æ‰¹ â†’ åˆ†é…ç¡®è®¤ â†’ å®Œæˆå®¡æ‰¹çš„å®Œæ•´æµç¨‹
- **å®æ—¶çŠ¶æ€ç®¡ç†**: å‘˜å·¥çŠ¶æ€ã€ä»»åŠ¡è¿›åº¦ã€ç³»ç»Ÿè´Ÿè½½çš„å®æ—¶ç›‘æ§
- **çµæ´»é‡åˆ†é…**: æ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨é‡åˆ†é…ï¼Œå¤„ç†å‘˜å·¥è¯·å‡ã€ä»»åŠ¡è¶…æ—¶ç­‰åœºæ™¯
- **å¯è§‚æµ‹æ€§**: åŸºäº Prometheus + Grafana çš„å®Œæ•´ç›‘æ§ä½“ç³»

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Frontend  â”‚    â”‚   Admin Panel   â”‚    â”‚   Mobile App    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Gateway                             â”‚
â”‚              (Authentication, Rate Limiting)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Task Service   â”‚    â”‚  Staff Service  â”‚    â”‚ Assignment Svc  â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ CRUD          â”‚    â”‚ â€¢ Profile Mgmt  â”‚    â”‚ â€¢ Algorithms    â”‚
â”‚ â€¢ Status Mgmt   â”‚    â”‚ â€¢ Skill Mgmt    â”‚    â”‚ â€¢ Load Balance  â”‚
â”‚ â€¢ Approval      â”‚    â”‚ â€¢ Availability  â”‚    â”‚ â€¢ Reassignment  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Message Queue (Asynq)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Critical Q  â”‚ â”‚ Default Q   â”‚ â”‚   Low Q     â”‚ â”‚  DLQ     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Worker Cluster                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Worker 1   â”‚ â”‚  Worker 2   â”‚ â”‚  Worker N   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚    â”‚     Redis       â”‚    â”‚   Monitoring    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Business Data â”‚    â”‚ â€¢ Queue Storage â”‚    â”‚ â€¢ Prometheus    â”‚
â”‚ â€¢ User Data     â”‚    â”‚ â€¢ Cache         â”‚    â”‚ â€¢ Grafana       â”‚
â”‚ â€¢ Audit Logs    â”‚    â”‚ â€¢ Session       â”‚    â”‚ â€¢ AlertManager  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Go 1.21+, Gin, GORM
- **é˜Ÿåˆ—**: Asynq (Redis-based)
- **æ•°æ®åº“**: MySQL 8.0+, Redis
- **ç›‘æ§**: Prometheus, Grafana
- **éƒ¨ç½²**: Docker, Docker Compose, Kubernetes
- **å‰ç«¯**: React/Vue.js (å¯é€‰)

## ğŸ“ é¡¹ç›®ç»“æ„

```
taskmanage/
â”œâ”€â”€ cmd/                    # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ api/               # API æœåŠ¡
â”‚   â”œâ”€â”€ worker/            # Worker æœåŠ¡
â”‚   â””â”€â”€ admin/             # ç®¡ç†åå°
â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ api/              # API å±‚
â”‚   â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ repository/       # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ model/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ middleware/       # ä¸­é—´ä»¶
â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”‚   â”œâ”€â”€ queue/            # é˜Ÿåˆ—å°è£…
â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ logger/           # æ—¥å¿—
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ scripts/              # è„šæœ¬
â”œâ”€â”€ deployments/          # éƒ¨ç½²é…ç½®
â””â”€â”€ tests/                # æµ‹è¯•
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- MySQL 8.0+
- Redis 6+
- Docker & Docker Compose

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone git@github.com:13892349048/task_magage.git
cd taskmanage
```

2. **å¯åŠ¨ä¾èµ–æœåŠ¡**
```bash
docker-compose up -d mysql redis
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥ç­‰
```

4. **è¿è¡Œæ•°æ®åº“è¿ç§»**
```bash
go run cmd/migrate/main.go
```

5. **å¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨ API æœåŠ¡
go run cmd/api/main.go

# å¯åŠ¨ Worker æœåŠ¡
go run cmd/worker/main.go
```

### Docker éƒ¨ç½²

```bash
docker-compose up -d
```

## ğŸ“š æ–‡æ¡£

- [API æ¥å£æ–‡æ¡£](docs/api.md)
- [æ•°æ®åº“è®¾è®¡](docs/database.md)
- [éƒ¨ç½²æŒ‡å—](docs/deployment.md)
- [å¼€å‘è§„èŒƒ](docs/development.md)
- [ç›‘æ§é…ç½®](docs/monitoring.md)

## ğŸ”§ é…ç½®

ä¸»è¦é…ç½®é¡¹åœ¨ `config/config.yaml`:

```yaml
server:
  port: 8080
  mode: debug

database:
  host: localhost
  port: 5432
  name: taskmanage
  user: postgres
  password: password

redis:
  host: localhost
  port: 6379
  password: ""
  db: 0

queue:
  concurrency: 10
  queues:
    critical: 6
    default: 3
    low: 1
```

## ğŸ“Š ç›‘æ§

ç³»ç»Ÿæä¾›å®Œæ•´çš„ç›‘æ§æŒ‡æ ‡:

- **ä»»åŠ¡æŒ‡æ ‡**: å®Œæˆç‡ã€å¤„ç†æ—¶é•¿ã€å¤±è´¥ç‡
- **å‘˜å·¥æŒ‡æ ‡**: è´Ÿè½½åˆ†å¸ƒã€æŠ€èƒ½åŒ¹é…ç‡ã€ç»©æ•ˆ
- **ç³»ç»ŸæŒ‡æ ‡**: QPSã€å»¶è¿Ÿã€é”™è¯¯ç‡ã€é˜Ÿåˆ—æ·±åº¦

è®¿é—® Grafana Dashboard: http://localhost:3000

## ğŸ¤ è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
